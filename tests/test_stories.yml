#### This file contains tests to evaluate that your bot behaves as expected.
#### If you want to learn more, please see the docs: https://rasa.com/docs/rasa/testing-your-assistant
version: "2.0"

stories:
  - story: happy path 1
    steps:
      - user: |
          hola
        intent: greet
      - action: utter_greet
      - user: |
          genial
        intent: mood_great
      - action: utter_happy

  - story: newsletter form happy path
    steps:
      - user: |
          hi
        intent: greet
      - action: utter_greet
      - user: |
          quiero suscribirme
        intent: subscribe
      - action: newsletter_form
      - active_loop: newsletter_form
      - user: |
          mi correo es [example@email.com](email)
        intent: inform_email
      - action: newsletter_form
      - user: |
          [dos veces a la semana](frequency)
        intent: inform_frequency
      - action: newsletter_form
      - active_loop: null
      - action: utter_subscribed
      - action: submit_newsletter_form

  - story: Chitchat during email
    steps:
      - user: |
          quiero suscribirme
        intent: subscribe
      - action: newsletter_form
      - active_loop: newsletter_form
      - user: |
          Qué tal el clima?
        intent: chitchat
      - action: utter_ask_continue
      - user: |
          Sí, si quiero
        intent: affirm
      - action: newsletter_form
      - active_loop: null
      - action: utter_subscribed
      - action: submit_newsletter_form

  - story: Chitchat during frequency
    steps:
      - user: |
          quiero suscribirme
        intent: subscribe
      - action: newsletter_form
      - active_loop: newsletter_form
      - user: |
          mi email es [example@email.com](email)
        intent: inform_email
      - action: newsletter_form
      - user: |
          Cómo está el clima?
        intent: chitchat
      - action: utter_ask_continue
      - user: |
          Sí quiero
        intent: affirm
      - action: newsletter_form
      - active_loop: null
      - action: utter_subscribed
      - action: submit_newsletter_form

  - story: Newsletter form two interruptions
    steps:
      - intent: subscribe
        user: |-
          quiero suscribirme
      - action: newsletter_form
      - active_loop: newsletter_form
      - slot_was_set:
          - requested_slot: email
      - intent: chitchat
        user: |-
          Cómo esta el clima?
      - action: utter_ask_continue
      - intent: affirm
        user: |-
          Sí
      - action: newsletter_form
      - slot_was_set:
          - requested_slot: email
      - intent: inform_email
        user: |-
          mi correo es [example@email.com](email)
      - slot_was_set:
          - email: example@email.com
      - action: newsletter_form
      - slot_was_set:
          - email: example@email.com
      - slot_was_set:
          - requested_slot: frequency
      - intent: chitchat
        user: |-
          quiero ordenar una pizza
      - action: utter_ask_continue
      - intent: affirm
        user: |-
          seguro
      - action: newsletter_form
      - slot_was_set:
          - requested_slot: frequency
      - intent: inform_frequency
        user: |-
          [dos veces por semana](frequency)
      - action: newsletter_form
      - slot_was_set:
          - frequency: twice a week
      - slot_was_set:
          - requested_slot: notifications
      - intent: affirm
        user: |-
          si
      - action: newsletter_form
      - slot_was_set:
          - notifications: yes
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: utter_subscribed
      - action: submit_newsletter_form
